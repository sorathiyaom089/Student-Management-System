{% extends "base.html" %}

{% block title %}Attendance Report - Admin Panel{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Attendance Report</h1>
    <a href="{{ url_for('admin_reports') }}" class="btn btn-secondary">Back to Reports</a>
</div>

<div class="table-container">
    <table class="data-table">
        <thead>
            <tr>
                <th>Course Code</th>
                <th>Course Name</th>
                <th>Total Students</th>
                <th>Total Classes</th>
                <th>Total Present</th>
                <th>Attendance %</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for record in report %}
            <tr>
                <td>{{ record.course_code }}</td>
                <td>{{ record.course_name }}</td>
                <td>{{ record.total_students }}</td>
                <td>{{ record.total_classes }}</td>
                <td>{{ record.total_present }}</td>
                <td>
                    <strong style="color: {{ '#27ae60' if record.attendance_percentage >= 75 else '#e74c3c' }};">
                        {{ "{:.2f}".format(record.attendance_percentage) }}%
                    </strong>
                </td>
                <td>
                    <span class="badge badge-{{ 'success' if record.attendance_percentage >= 75 else 'danger' }}">
                        {{ 'Good' if record.attendance_percentage >= 75 else 'Low' }}
                    </span>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
